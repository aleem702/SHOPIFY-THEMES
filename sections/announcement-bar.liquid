{% style %}
  #announcement-bar-section-{{ section.id }} {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
  }

  @media (max-width: 768px) {
    #announcement-bar-section-{{ section.id }} {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round }}px;
    }
  }
{% endstyle %}

<div id="announcement-bar-section-{{ section.id }}" class="announcement-bar">
  {%- for block in section.blocks -%}
    {%- if block.type == 'announcement' -%}
      {% style %}
        .announcement-bar__message-{{ block.id }} {
          font-size: {{ block.settings.mobile_font_size }}px;
        }
        @media screen and (min-width: 750px) {
          .announcement-bar__message-{{ block.id }} {
            font-size: {{ block.settings.desktop_font_size }}px;
          }
        }
      {% endstyle %}
      <div
        class="announcement-bar__item"
        role="region"
        aria-label="{{ 'sections.header.announcement' | t }}"
        {{ block.shopify_attributes }}
      >
        {%- if block.settings.text != blank -%}
          {%- if block.settings.link != blank -%}
            <a href="{{ block.settings.link }}" class="announcement-bar__link link link--text focus-inset animate-arrow">
          {%- endif -%}
  
          <div class="page-width">
            <p class="announcement-bar__message announcement-bar__message-{{ block.id }} {{ block.settings.text_alignment }}" style="color: {{ block.settings.text_color }};">
              <span style="
                color: {{ block.settings.text_color }};
                {% if block.settings.bold_text %}font-weight: bold;{% endif %}
                --color-highlighted-color: {{ block.settings.bolded_text_color }};
              ">
                {{- block.settings.text -}}
              </span>
              {%- if block.settings.link != blank -%}
                {% render 'icon-arrow' %}
              {%- endif -%}
            </p>
          </div>
  
          {%- if block.settings.link != blank -%}
            </a>
          {%- endif -%}
        {%- endif -%}
      </div>
    {%- endif -%}
  {%- endfor -%}
</div>

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "max_blocks": 12,
  "class": "announcement-bar-section",
  "settings": [
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#1E1E1E"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 10
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 10
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "t:sections.announcement-bar.blocks.announcement.name",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text",
          "default": "Free shipping on orders over $50 | Fast worldwide delivery",
          "label": "Text content"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "options": [
            {
              "value": "left",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__1.label"
            },
            {
              "value": "center",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__2.label"
            },
            {
              "value": "right",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__3.label"
            }
          ],
          "default": "center",
          "label": "Alignment"
        },
        {
          "type": "range",
          "id": "desktop_font_size",
          "label": "Desktop font size",
          "min": 10,
          "max": 30,
          "step": 1,
          "unit": "px",
          "default": 16
        },
        {
          "type": "range",
          "id": "mobile_font_size",
          "label": "Mobile font size",
          "min": 10,
          "max": 30,
          "step": 1,
          "unit": "px",
          "default": 16
        },
        {
          "type": "header",
          "content": "Styling"
        },
        {
          "type": "checkbox",
          "id": "bold_text",
          "label": "Bold text",
          "default": false
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text color",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "bolded_text_color",
          "label": "Bolded text color",
          "default": "#ffffff"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}
