

{% comment %} 
{{ 'section-comparison-table-.css' | asset_url | stylesheet_tag }}
{% render 'rte-css' %}
{% endcomment %}

{%- liquid
  assign global_heading_size = settings.enable_global_heading_font_size
  assign global_body_size = settings.enable_global_body_font_size
  assign global_color = settings.enable_global_color
  assign features_column_background_color = section.settings.features_background_color
  assign icon_cells_background_color = section.settings.icon_cells_background_color
  assign table_border_radius = 10
  assign section_id_variable = section.id
-%}

{% if request.visual_preview_mode %}
  {% comment %} For some reason, using actual section id in preview messes up the preview render. Doing this fixes it. {% endcomment %}
  {% assign section_id_variable = "id" %}
{% endif %}


{% style %}
  #shopify-section-{{ section_id_variable }} .section__comparison_table {
    padding: 5px 0;
  }

  .section-container-{{ section_id_variable }} {
    padding-top: {{ section.settings.section_padding_top_desktop }}px;
    padding-bottom: {{ section.settings.section_padding_bottom_desktop }}px;
  }
  
  @media screen and (max-width: 768px) {
    .section-container-{{ section_id_variable }} {
      padding-top: {{ section.settings.section_padding_top_desktop | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.section_padding_bottom_desktop | times: 0.75 | round: 0 }}px;
    }
  }

  #heading-{{ section_id_variable }}{
    font-size: {% if global_heading_size %}var(--font-heading-size)!important{% else %}{{ section.settings.heading_size }}px!important{% endif %};
    line-height: {% if global_heading_size %}calc(var(--font-heading-size) + 8px)!important{% else %}{{ section.settings.heading_size | plus: 8 }}px!important{% endif %};
    color: {% if global_color %}rgb(var(--color-base-heading)){% else %}{{ section.settings.heading_color }}{% endif %};
    --color-highlighted-color: {{ section.settings.bolded_heading_color }};
    margin-top: 0;
  }

  #heading-{{ section.id }} strong {
    {%- if section.settings.heading_use_gradient -%}
      background: {% if section.settings.heading_gradient_color != blank %}{{ section.settings.heading_gradient_color }}{% else %}var(--gradient-base-background-1){% endif %};
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    {%- endif -%}
  }

  @media (max-width: 768px){
    #heading-{{ section_id_variable }}{
      font-size: {% if global_heading_size %}var(--font-heading-mob-size) !important{% else %}{{ section.settings.heading_mob_size }}px!important{% endif %};
      line-height: {% if global_heading_size %}calc(var(--font-heading-mob-size) + 8px) !important{% else %}{{ section.settings.heading_mob_size | plus: 8 }}px!important{% endif %};
    }
  }

  #section-body-text-{{ section_id_variable }},
  #section-body-text-{{ section_id_variable }} p {
    font-size: {% if global_body_size %}var(--global-body-text-font-size){% else %}{{ section.settings.body_size }}px{% endif %} !important;
    line-height: {% if global_body_size %}calc(var(--global-body-text-font-size) + 8px){% else %}{{ section.settings.body_size | plus: 8 }}px{% endif %} !important;
    color: {% if global_color %}rgb(var(--color-base-text)){% else %}{{ section.settings.body_color }}{% endif %};
    --color-highlighted-color: {{ section.settings.bolded_body_color }};
    margin-bottom: 0;
  }

  #section-body-text-{{ section_id_variable }} strong {
    color: {{ section.settings.bolded_body_color }};
  }

  @media (max-width: 768px) {
    #section-body-text-{{ section_id_variable }} p,
    #section-body-text-{{ section_id_variable }} {
      font-size: {% if global_body_size %}var(--global-body-text-font-size)!important{% else %}{{ section.settings.body_size }}px !important{% endif %};
    }
  }

  .section-container-{{ section_id_variable }} {
    display: flex;
    align-items: stretch;
    {% if section.settings.layout_desktop == 'table_second' %}
      flex-direction: row;
    {% else %}
      flex-direction: row-reverse;
    {% endif %}
  }

  @media screen and (max-width: 750px) {
    .section-container-{{ section_id_variable }} {
      {% if section.settings.layout_mobile == 'table_second' %}
        flex-direction: column;
        {% else %}
        flex-direction: column-reverse;
      {% endif %}
    }
    .section-container-{{ section_id_variable }} a.button {
      width: 100%;
    }
  }

  #leftSideContainer-{{ section_id_variable }} {
    text-align: {{ section.settings.content_alignment }};
  }

  #rightSideContainer-{{ section_id_variable }} {
    flex-direction: column;
  }

  @media (min-width: 768px) { 
    #leftSideContainer-{{ section_id_variable }} {
      {% if section.settings.layout_desktop == 'table_first' %}
        padding-left: 40px;
      {% else %}
        padding-right: 40px;
      {% endif %}
    }
  }

  .table-container {
    width: 100%;
  }


  .table-element-scoped-{{ section_id_variable }} {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    overflow: hidden;
    --table-border: 1px solid {{ section.settings.table_border_color }};
  }

  .table-element-scoped-{{ section_id_variable }} thead th {
    color: {{ section.settings.cell_headers_text_color }};
    text-align: center;
    font-weight: normal;
    padding: 15px 10px;
    overflow-wrap: break-word;
  }
  
  .table-element-scoped-{{ section_id_variable }} tbody td {
    padding: 1rem;
    text-align: center;
    vertical-align: middle;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr td div {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .table-element-scoped-{{ section_id_variable }} thead tr th:nth-of-type(2) {
    border-radius: {{ table_border_radius }}px {{ table_border_radius }}px 0 0;
    border: var(--table-border);
    border-bottom: none;
  }

  .table-element-scoped-{{ section_id_variable }} tfoot tr:first-child td:nth-of-type(2) {
    border-radius: 0 0 {{ table_border_radius }}px {{ table_border_radius }}px;
    border: var(--table-border);
    border-top: none;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr td {
    border-right: var(--table-border);
    border-bottom: var(--table-border);
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:first-child td {
    border-top: var(--table-border);
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr td:first-child {
    border-left: var(--table-border);
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:first-child td:nth-child(2) {
    border-top: none;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr td:nth-child(2) {
    border-bottom: none;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:first-child td:first-child {
    border-top-left-radius: {{ table_border_radius }}px;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:first-child td:last-child {
    border-top-right-radius: {{ table_border_radius }}px;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:last-child td:first-child {
    border-bottom-left-radius: {{ table_border_radius }}px;
  }

  .table-element-scoped-{{ section_id_variable }} tbody tr:last-child td:last-child {
    border-bottom-right-radius: {{ table_border_radius }}px;
  }

  .table-element-scoped-{{ section_id_variable }} tbody td.other-brands-column {
    background-color: {{ icon_cells_background_color }};
  }

  .table-element-scoped-{{ section_id_variable }} tbody td.feature-cell {
    background-color: {{ features_column_background_color }}; 
    font-size: {{ section.settings.benefits_desktop_size }}px;
    text-align: left;     
    padding-inline: 2rem;
    {% if section.settings.bold_features_text %}
      font-weight: bold;
    {% endif %}
  }

  .logo-{{ section_id_variable }} {
    width: {{ section.settings.logo_width }}px;
    height: auto;
  }

  .mobile-table-first-heading {
    display: none;
  }

  .mobile-table-first-heading-hidden {
    display: block;
  }

  @media (max-width: 768px) {
    .table-element-scoped-{{ section_id_variable }} {
      padding-block: 2rem;
    }
    .logo-{{ section_id_variable }} {
      width: {{ section.settings.mobile_logo_width }}px;
      height: auto;
    }
    .table-element-scoped-{{ section_id_variable }} tbody td.feature-cell {
      font-size: {{ section.settings.benefits_mobile_size }}px;
    }
    .mobile-table-first-heading {
      display: block;
    }
    .mobile-table-first-heading-hidden {
      display: none;
    }
  }
{%- endstyle -%}


{% capture checkmark_svg %}
  <svg fill="{{ section.settings.checkmark_color }}" width="30px" height="30px" viewBox="-3.5 0 19 19" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4.63 15.638a1.028 1.028 0 0 1-.79-.37L.36 11.09a1.03 1.03 0 1 1 1.58-1.316l2.535 3.043L9.958 3.32a1.029 1.029 0 0 1 1.783 1.03L5.52 15.122a1.03 1.03 0 0 1-.803.511.89.89 0 0 1-.088.004z"></path></g></svg>
{% endcapture %}

{% capture x_mark_svg %}
  <svg fill="{{ section.settings.x_color }}" width="30px" height="30px" viewBox="0 0 32.00 32.00" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke="#000000" stroke-width="0.00032"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>cancel2</title> <path d="M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396 0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038 0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038 0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396 1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396 0.396 0.396 1.038 0 1.435l-6.096 6.096z"></path> </g></svg>
{% endcapture %}

<div class="section__comparison_table color-{{ section.settings.color_scheme }}">
  <div class="page-width section-container-{{ section_id_variable }}">
    <div id="leftSideContainer-{{ section_id_variable }}" class="half color-{{ section.settings.content_color_scheme }}" style='display:flex; align-items:center;'>
      <div style="width: 100%;">
        {% if section.settings.content_heading != blank %}
          <h2 id="heading-{{ section_id_variable }}" class="title{% if section.settings.layout_mobile == 'table_first' %} mobile-table-first-heading-hidden{% endif %}">
            {{ section.settings.content_heading }}
          </h2>
        {% endif %}
    
        {% if section.settings.body_content != blank %}
          <div id="section-body-text-{{ section_id_variable }}">
            {{ section.settings.body_content }}
          </div>
        {% endif %}
        
        {%- if section.settings.button_label != blank -%}
          <div style="margin-top: 15px;">
            <a
              {% if section.settings.link %}
                href="{{ section.settings.link }}"
              {% else %}
                aria-disabled="true"
              {% endif %}
              class="button button--primary split-slide-button"
            >
              <div class="split-slide-right"></div>
              <span class="button-text">
                {{- section.settings.button_label | escape -}}
              </span>
            </a>
          </div>
        {%- endif -%}
      </div>
    </div>
    <div id="rightSideContainer-{{ section_id_variable }}" class="half flex-align-center">
      {% if section.settings.layout_mobile == 'table_first' and section.settings.content_heading != blank %}
        <h2 id="heading-{{ section_id_variable }}" class="title mobile-table-first-heading">
          {{ section.settings.content_heading }}
        </h2>
      {% endif %}
      <div class="table-container">
        <table class="table-element-scoped-{{ section_id_variable }}">
          <thead>
            <tr>
              <th>
                {% comment %} Features {% endcomment %}
              </th>
              <th class="color-{{ section.settings.self_cells_background_color }}">
                {%- if section.settings.logo != blank -%}
                  <img 
                    class="logo-{{ section_id_variable }}" 
                    src="{{ section.settings.logo | image_url }}" 
                    alt="{{ shop.name }}"
                    width="100%"
                    height="auto"
                  >
                {%- else -%}
                  {% if section.settings.us_label == blank %}
                    {{ shop.name }}
                  {% else %}
                    {{ section.settings.us_label }}
                  {% endif %}
                {%- endif -%}
              </th>
              <th>{{ section.settings.other_brands_label }}</th>
            </tr>
          </thead>
          <tbody class="fade-in-child">
            {%- for block in section.blocks -%}
              <tr>
                <td class="feature-cell" style="color: {{ block.settings.feature_text_color }};">
                  {{ block.settings.benefit }}
                </td>
                <td class="color-{{ section.settings.self_cells_background_color }}">
                  <div>
                    {%- if block.settings.us -%}
                      {{ checkmark_svg }}
                    {%- else -%}
                      {{ x_mark_svg }}
                    {%- endif -%}
                  </div>
                </td>
                <td class="other-brands-column">
                  <div>
                    {%- if block.settings.others -%}
                      {{ checkmark_svg }}
                    {%- else -%}
                      {{ x_mark_svg }}
                    {%- endif -%}
                  </div>
                </td>
              </tr>
            {%- endfor -%}
          </tbody>
          <tfoot>
            <tr>
              <td></td>
              <td class="color-{{ section.settings.self_cells_background_color }}">&nbsp;</td>
              <td></td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Comparison table",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "content_heading",
      "default": "What Make Us Different",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "body_content",
      "default": "<p>Short description of what make brand different</p>",
      "label": "Body"
    },
    {
      "type": "inline_richtext",
      "id": "button_label",
      "label": "Button label",
      "info": "Leave blank to hide"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Button link"
    },
    {
      "type": "inline_richtext",
      "id": "us_label",
      "label": "Custom text",
      "info": "Displays if no logo selected."
    },
    {
      "type": "inline_richtext",
      "id": "other_brands_label",
      "label": "Other brands text",
      "default": "Others"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "layout_desktop",
      "options": [
        {
          "value": "table_first",
          "label": "Table first"
        },
        {
          "value": "table_second",
          "label": "Table second"
        }
      ],
      "default": "table_second",
      "label": "Desktop table placement"
    },
    {
      "type": "select",
      "id": "layout_mobile",
      "options": [
        {
          "value": "table_first",
          "label": "Table first"
        },
        {
          "value": "table_second",
          "label": "Table second"
        }
      ],
      "default": "table_second",
      "label": "Mobile table placement"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Desktop heading size",
      "default": 40
    },
    {
      "type": "range",
      "id": "heading_mob_size",
      "min": 10,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Mobile heading size",
      "default": 28
    },
    {
      "type": "range",
      "id": "body_size",
      "label": "Body font size",
      "min": 8,
      "max": 24,
      "step": 2,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Desktop logo width",
      "default": 90
    },
    {
      "type": "range",
      "id": "mobile_logo_width",
      "min": 40,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Mobile logo width",
      "default": 60
    },
    {
      "type": "range",
      "id": "benefits_desktop_size",
      "min": 8,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Desktop benefits size",
      "default": 16
    },
    {
      "type": "range",
      "id": "benefits_mobile_size",
      "min": 4,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Mobile benefits size",
      "default": 14
    },
    {
      "type": "checkbox",
      "id": "bold_features_text",
      "label": "Bold features text",
      "default": false
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bolded_heading_color",
      "label": "Bolded heading color",
      "default": "#000000"
    },
    {
      "type": "checkbox",
      "id": "heading_use_gradient",
      "label": "Use gradient for heading",
      "info": "Any text formatted as bold within the heading will be converted to a gradient.",
      "default": false
    },
    {
      "type": "color_background",
      "id": "heading_gradient_color",
      "label": "Heading gradient color"
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body color",
      "default": "#757575"
    },
    {
      "type": "color",
      "id": "bolded_body_color",
      "label": "Bolded body color",
      "default": "#757575"
    },
    {
      "type": "header",
      "content": "Table appearance"
    },
    {
      "type": "color",
      "id": "table_border_color",
      "label": "Table grid line color",
      "default": "#c4c4c4"
    },
    {
      "type": "color",
      "id": "features_background_color",
      "label": "Benefit row background color",
      "default": "#D4D4D4"
    },
    {
      "type": "select",
      "id": "self_cells_background_color",
      "label": "Brand column background",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "accent-3",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "custom-color-1",
          "label": "t:sections.all.colors.custom_color_1.label"
        },
        {
          "value": "custom-color-2",
          "label": "t:sections.all.colors.custom_color_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "accent-3",
    },
    {
      "type": "color",
      "id": "icon_cells_background_color",
      "default": "#FFFFFF",
      "label": "Competitor column background"
    },
    {
      "type": "color",
      "id": "cell_headers_text_color",
      "label": "Brand names text color",
      "default": "#1E1E1E"
    },
    {
      "type": "color",
      "id": "checkmark_color",
      "default": "#4BB82C",
      "label": "Yes/included icon color"
    },
    {
      "type": "color",
      "id": "x_color",
      "label": "No/not included icon color",
      "default": "#DA6262"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "accent-3",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "custom-color-1",
          "label": "t:sections.all.colors.custom_color_1.label"
        },
        {
          "value": "custom-color-2",
          "label": "t:sections.all.colors.custom_color_2.label"
        },
        {
          "value": "custom-color-3",
          "label": "t:sections.all.colors.custom_color_3.label"
        },
        {
          "value": "custom-color-4",
          "label": "t:sections.all.colors.custom_color_4.label"
        },
        {
          "value": "custom-color-5",
          "label": "t:sections.all.colors.custom_color_5.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        },
        {
          "value": "gradient-background-1",
          "label": "t:sections.all.colors.gradient_background_1.label"
        }
      ],
      "default": "accent-1",
      "label": "Section color scheme"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "section_padding_top_desktop",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 24
    },
    {
      "type": "range",
      "id": "section_padding_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 24
    }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Table row",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "benefit",
          "default": "1-3 word benefit",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "checkbox",
          "id": "us",
          "default": true,
          "label": "Us"
        },
        {
          "type": "checkbox",
          "id": "others",
          "default": false,
          "label": "Others"
        },
        {
          "type": "header",
          "content": "Styling"
        },
        {
          "type": "color",
          "id": "feature_text_color",
          "label": "Text color",
          "default": "#383838"
        },
        {
          "type": "color",
          "id": "heading_highlighted_color",
          "label": "Bolded text color",
          "default": "#383838"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Comparison table",
      "blocks": [
        {
          "type": "row"
        },
        {
          "type": "row"
        },
        {
          "type": "row"
        },
        {
          "type": "row"
        },
        {
          "type": "row"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}