{%- liquid
  assign global_heading_size = settings.enable_global_heading_font_size
  assign global_body_size = settings.enable_global_body_font_size
  assign global_color = settings.enable_global_color
-%}

{%- style -%}
  {%- if request.visual_preview_mode -%}
    {% comment %} don't want fade-in animation in preview mode because it messes up preview {% endcomment %}
    .animation_section,
    .animation_section * {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
      will-change: auto !important;
    }
  {%- endif -%}
  
  #shopify-section-{{ section.id }} .section__featured_logs {
    padding: 5px 0;
  }
  
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media (min-width: 768px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  #section-heading-{{ section.id }}{
    font-size: {% if global_heading_size %}var(--font-heading-size)!important{% else %}{{ section.settings.heading_size }}px!important{% endif %};
    line-height: {% if global_heading_size %}calc(var(--font-heading-size) + 8px)!important{% else %}{{ section.settings.heading_size | plus: 8 }}px!important{% endif %};
    color: {% if global_color %}rgb(var(--color-base-heading)){% else %}{{ section.settings.heading_color }}{% endif %};
    --color-highlighted-color: {{ section.settings.heading_highlighted_text }};
    text-align: center;
  }

  @media (max-width: 768px){
    #section-heading-{{ section.id }}{
      font-size: {% if global_heading_size %}var(--font-heading-mob-size) !important{% else %}{{ section.settings.heading_mob_size }}px!important{% endif %};
      line-height: {% if global_heading_size %}calc(var(--font-heading-mob-size) + 8px) !important{% else %}{{ section.settings.heading_mob_size | plus: 8 }}px!important{% endif %};
    }
  }

  .featured-logo-{{ section.id }} {
    width: {{ section.settings.desktop_logo_size }}px;
  }

  @media (max-width: 768px) {
    .featured-logo-{{ section.id }} {
      width: {{ section.settings.mobile_logo_size }}px;
    }
  }

  .featured-logos-container {
    display: flex;
    text-align: center;
    justify-content: center;
    align-items: center;
    column-gap: {{ section.settings.logo_horizontal_gap_size }}px;
    row-gap: {{ section.settings.logo_vertical_gap_size }}px;
  }
  @media (max-width: 768px) {
    .featured-logos-container {
        flex-wrap: wrap;
    }
  }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} section__featured_logs">
  <div class="page-width section-{{ section.id }}-padding">
    {% if section.settings.title != blank %}
      <h2
        id="section-heading-{{ section.id }}"
        class="title"
      >
        {{ section.settings.title }}
      </h2>
    {% endif %}
    <div class="featured-logos-container fade-in-child">
      {% for block in section.blocks %}
        <div class="featured-logo-{{ section.id }}">
          {% if block.settings.logo_link != blank %}
            <a
              href="{{ block.settings.logo_link }}"
              {% if block.settings.open_link_in_new_tab %}
                target="_blank" rel="noreferrer"
              {% endif %}
            >
          {% endif %}
          {% if block.settings.image %}
            <img
              src="{{ block.settings.image | img_url: 'master' }}"
              width="100%"
              height="auto"
            >
          {% else %}
            <img
              src="{{ 'atlas_logo_512_x_512.png' | asset_url }}"
              alt="Default image"
              width="100%"
              height="auto"
              {% comment %} style="border: 1px solid #000;" {% endcomment %}
            >
          {% endif %}
          {% if block.settings.logo_link != blank %}
            </a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Featured logos",
  "class": "section animation_section",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "title",
      "default": "As seen in",
      "label": "Heading"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Desktop heading size",
      "default": 40
    },
    {
      "type": "range",
      "id": "heading_mob_size",
      "min": 10,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Mobile heading size",
      "default": 28
    },
    {
      "type": "range",
      "id": "desktop_logo_size",
      "min": 30,
      "max": 200,
      "step": 10,
      "default": 100,
      "label": "Desktop logo size"
    },
    {
      "type": "range",
      "id": "mobile_logo_size",
      "min": 30,
      "max": 200,
      "step": 10,
      "default": 150,
      "label": "Mobile logo size"
    },
    {
      "type": "range",
      "id": "logo_horizontal_gap_size",
      "min": 1,
      "max": 100,
      "step": 1,
      "default": 70,
      "label": "Logo horizontal gap"
    },
    {
      "type": "range",
      "id": "logo_vertical_gap_size",
      "min": 1,
      "max": 100,
      "step": 1,
      "default": 15,
      "label": "Logo vertical gap"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#383838"
    },
    {
      "type": "color",
      "id": "heading_highlighted_text",
      "label": "Bolded heading color",
      "default": "#383838"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "accent-3",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "custom-color-1",
          "label": "t:sections.all.colors.custom_color_1.label"
        },
        {
          "value": "custom-color-2",
          "label": "t:sections.all.colors.custom_color_2.label"
        },
        {
          "value": "custom-color-3",
          "label": "t:sections.all.colors.custom_color_3.label"
        },
        {
          "value": "custom-color-4",
          "label": "t:sections.all.colors.custom_color_4.label"
        },
        {
          "value": "custom-color-5",
          "label": "t:sections.all.colors.custom_color_5.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        },
        {
          "value": "gradient-background-1",
          "label": "Background gradient"
        }
      ],
      "default": "accent-1",
      "label": "Section color scheme"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 24
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Logo"
        },
        {
          "type": "url",
          "id": "logo_link",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "open_link_in_new_tab",
          "label": "Open link in a new tab",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured logos",
      "blocks": [
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
