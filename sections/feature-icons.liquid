{%- liquid
  assign global_heading_size = settings.enable_global_heading_font_size
  assign global_body_size = settings.enable_global_body_font_size
  assign global_color = settings.enable_global_color
  assign mobile_columns = section.settings.columns_mobile | plus: 0
  assign swipe_on_mobile = false
  if section.settings.swipe_on_mobile and section.blocks.size > mobile_columns
    assign swipe_on_mobile = true
  endif
-%}

{% style %}
  #shopify-section-{{ section.id }} {
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --section-padding-horizontal: {{ section.settings.padding_horizontal_desktop }}px;
    --heading-size: {% if global_heading_size %}var(--font-heading-size){% else %}{{ section.settings.heading_size }}px{% endif %};
    --heading-line-height: {% if global_heading_size %}calc(var(--font-heading-size) + 8px){% else %}{{ section.settings.heading_size | plus: 8 }}px{% endif %};
    --heading-color: {% if global_color %}rgb(var(--color-base-heading)){% else %}{{ section.settings.heading_color }}{% endif %};
    --body-size: {% if global_body_size %}var(--font-body-size){% else %}{{ section.settings.body_size }}px{% endif %};
    --body-line-height: {% if global_body_size %}calc(var(--font-body-size) + 8px){% else %}{{ section.settings.body_size | plus: 8 }}px{% endif %};
    --body-color: {% if global_color %}rgb(var(--color-base-body)){% else %}{{ section.settings.body_color }}{% endif %};
    --bolded-heading-color: {{ section.settings.bolded_heading_color }};
    --bolded-body-color: {{ section.settings.bolded_body_color }};
  }

  #shopify-section-{{ section.id }} .section__feature_icons {
    padding: 5px 0;
    margin: -1px 0;
  }

  #section-{{ section.id }} {
    padding: var(--section-padding-top) 0 var(--section-padding-bottom);
  }

  #section-{{ section.id }} .feature-icons-padding {
    padding: 0 var(--section-padding-horizontal);
  }

  #section-{{ section.id }} .title {
    margin: 0 0 2.5rem;
    text-align: center;
    font-size: var(--heading-size);
    line-height: var(--heading-line-height);
    color: var(--heading-color);
    --color-highlighted-color: var(--bolded-heading-color);
  }

  #section-{{ section.id }} .feature-icons-text {
    text-align: center;
    font-size: var(--body-size);
    line-height: var(--body-line-height);
    color: var(--body-color);
    --color-highlighted-color: var(--bolded-body-color);
  }

  .feature-icon-card {
    padding: 2.5rem;
    text-align: center;
  }

  .feature-icon-card__icon {
    --small-icon-size: 3rem;
    --medium-icon-size: 3.5rem;
    --large-icon-size: 4rem;
    margin-bottom: 1rem;
  }

  .feature-icon-card__icon svg {
    display: inline-block;
  }

  .feature-icon-card__icon--small svg:not(.placeholder-svg),
  .feature-icon-card__icon--small img {
    height: var(--small-icon-size);
    width: var(--small-icon-size);
  }

  .feature-icon-card__icon--small span {
    font-size: 28px;
  }

  .feature-icon-card__icon--medium svg:not(.placeholder-svg),
  .feature-icon-card__icon--medium img {
    height: var(--medium-icon-size);
    width: var(--medium-icon-size);
  }

  .feature-icon-card__icon--medium span {
    font-size: 34px;
  }

  .feature-icon-card__icon--large svg:not(.placeholder-svg),
  .feature-icon-card__icon--large img {
    height: var(--large-icon-size);
    width: var(--large-icon-size);
  }

  .feature-icon-card__icon--large span {
    font-size: 40px;
  }

  .feature-icon-card__title {
    font-weight: 500;
    line-height: calc(1 + 0.5 / max(1, var(--font-heading-scale)));
    margin: 1rem 0 0;
  }

  .feature-icon-card__text {
    padding-top: 1rem;
  }

  .feature-icon-card__text p {
    margin: 0;
  }

  #section-{{ section.id }} .title strong {
    {%- if section.settings.heading_use_gradient -%}
      background: {% if section.settings.heading_gradient_color != blank %}{{ section.settings.heading_gradient_color }}{% else %}var(--gradient-base-background-1){% endif %};
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    {%- endif -%}
  }

  @media (max-width: 786px) {
    #section-{{ section.id }} .title {
      font-size: {% if global_heading_size %}var(--font-heading-mob-size){% else %}{{ section.settings.heading_mob_size }}px{% endif %};
      line-height: {% if global_heading_size %}calc(var(--font-heading-mob-size) + 8px){% else %}{{ section.settings.heading_mob_size | plus: 8 }}px{% endif %};
    }

    #section-{{ section.id }} .feature-icons-padding {
      padding: 0 1.5rem;
    }
  }
{% endstyle %}

<div class="section__feature_icons color-{{ section.settings.color_scheme }}">
  <div id="section-{{ section.id }}" class="gradient">
    <div class="page-width feature-icons-padding">
      {%- if section.settings.title != blank -%}
        <h2 class="title">{{ section.settings.title }}</h2>
      {%- endif -%}
      
      {%- if section.settings.text != blank -%}
        <div class="feature-icons-text">{{ section.settings.text }}</div>
      {%- endif -%}
  
      <slider-component class="slider-mobile-gutter">
        <div 
          id="Slider-{{ section.id }}"
          role="list" 
          class="feature-icons-container grid grid--{{ section.settings.columns_mobile }}-col-tablet-down grid--{{ section.settings.columns_desktop }}-col-desktop{% if swipe_on_mobile %} slider slider--mobile grid--peek{% endif %} fade-in-child"
        >
          {%- for block in section.blocks -%}
            <div 
              aria-roledescription="{{ block.settings.title }}"
              role="listitem"
              id="Slide-feature-card-{{ block.id }}-{{ forloop.index }}" 
              class="feature-icon-card content-container grid__item {% if swipe_on_mobile %} slider__slide{% endif %}{% if section.settings.background_style == 'primary' %} color-{{ section.settings.card_color_scheme }}{% endif %}" 
              {{ block.shopify_attributes }}
            >
              <div class="feature-icon-card__icon feature-icon-card__icon--{{ section.settings.icon_size }}">
                {%- if block.settings.custom_icon_image == blank and block.settings.icon != blank -%}
                  <span 
                    class="material-icon material-symbols-outlined notranslate"
                    style="color: {{ block.settings.custom_icon_color }};"
                  >
                    <style>
                      #Slide-feature-card-{{ block.id }}-{{ forloop.index }} .material-icon svg{
                        fill: {{ block.settings.custom_icon_color }};
                      }
                    </style>
                    {{  block.settings.icon }}
                  </span>
                {%- elsif block.settings.custom_icon_image != blank -%}
                  <img
                    src="{{ block.settings.custom_icon_image | image_url }}"
                    {% if block.settings.custom_icon_image.alt != blank %}
                      alt="{{ block.settings.custom_icon_image.alt | escape }}"
                    {% else %}
                      role="presentation"
                    {% endif %}
                    style="width: {{ block.settings.custom_icon_size }}px; height: {{ block.settings.custom_icon_size }}px;"
                    height="auto"
                    width="auto"
                    loading="lazy"
                  >
                {%- else -%}
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {%- endif -%}
              </div>
              
              <div class="feature-icon-card__content">
                {% if block.settings.title != blank %}
                  <h3 class="feature-icon-card__title title" style="color: {{ block.settings.icon_heading_color }}; font-size: {{ block.settings.icon_heading_font_size }}px; line-height: {{ block.settings.icon_heading_font_size }}px; --color-highlighted-color: {{ block.settings.icon_bolded_heading_color }};">
                    {{ block.settings.title }}
                  </h3>
                {% endif %}
                {% if block.settings.text != blank %}
                  <div class="feature-icon-card__text">
                    {{ block.settings.text }}
                  </div>
                {% endif %}
              </div>

              {% style %}
                #Slide-feature-card-{{ block.id }}-{{ forloop.index }} .feature-icon-card__text,
                #Slide-feature-card-{{ block.id }}-{{ forloop.index }} .feature-icon-card__text p {
                  font-size: {% if global_body_size %}var(--global-body-text-font-size) !important{% else %}{{ block.settings.column_text_size }}px !important{% endif %}; 
                  line-height: {% if global_body_size %}calc(var(--global-body-text-font-size) + 4px)!important{% else %}{{ block.settings.column_text_size | plus: 4 }}px!important{% endif %}; 
                  color: {% if global_color %}rgb(var(--color-base-text)) !important{% else %}{{ block.settings.column_text_color }} !important{% endif %}; 
                  --color-highlighted-color: {{ block.settings.column_text_highlighted_color }};
                }
              {% endstyle %}
            </div>
          {%- endfor -%}
        </div>

        {%- if swipe_on_mobile -%}
          <div class="slider-buttons no-js-hidden medium-hide">
            <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}">
              {% render 'icon-caret' %}
            </button>
            <div class="slider-counter caption">
              <span class="slider-counter--current">1</span>
              <span aria-hidden="true"> / </span>
              <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
              <span class="slider-counter--total">{{ section.blocks.size }}</span>
            </div>
            <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'general.slider.next_slide' | t }}">
              {% render 'icon-caret' %}
            </button>
          </div>
        {%- endif -%}
      </slider-component>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Icon guarantees",
  "class": "section animation-section",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "inline_richtext",
      "id": "title",
      "default": "Why Choose us?",
      "label": "t:sections.multicolumn.settings.title.label"
    },
    {
      "type": "richtext",
      "id": "text",
      "default": "<p>Yourself required no at thoughts delicate landlord it be. Branched dashwood do is whatever it. Farther be chapter at visited married in it pressed.</p>",
      "label": "Body",
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Desktop heading size",
      "default": 40
    },
    {
      "type": "range",
      "id": "heading_mob_size",
      "min": 10,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Mobile heading size",
      "default": 28
    },
    {
      "type": "range",
      "id": "body_size",
      "min": 8,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Body font size",
      "default": 16,
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 4,
      "label": "Desktop column count"
    },
    {
      "type": "range",
      "id": "padding_horizontal_desktop",
      "min": 10,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Desktop horizontal padding",
      "default": 50
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "options": [
        {
          "value": "1",
          "label": "t:sections.multicolumn.settings.columns_mobile.options__1.label"
        },
        {
          "value": "2",
          "label": "t:sections.multicolumn.settings.columns_mobile.options__2.label"
        }
      ],
      "default": "2",
      "label": "Mobile column count"
    },
    {
      "type": "select",
      "id": "icon_size",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "medium",
      "label": "Icon size"
    },
    {
      "type": "checkbox",
      "id": "swipe_on_mobile",
      "default": false,
      "label": "Mobile swipe"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bolded_heading_color",
      "label": "Bolded heading color",
      "default": "#000000"
    },
    {
      "type": "checkbox",
      "id": "heading_use_gradient",
      "label": "Use gradient for heading",
      "info": "Any text formatted as bold within the heading will be converted to a gradient.",
      "default": false
    },
    {
      "type": "color_background",
      "id": "heading_gradient_color",
      "label": "Heading gradient color"
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bolded_body_color",
      "label": "Bolded body color",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "background_style",
      "options": [
        {
          "value": "none",
          "label": "t:sections.multicolumn.settings.background_style.options__1.label"
        },
        {
          "value": "primary",
          "label": "t:sections.multicolumn.settings.background_style.options__2.label"
        }
      ],
      "default": "primary",
      "label": "t:sections.multicolumn.settings.background_style.label"
    },
    {
      "type": "select",
      "id": "card_color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "accent-3",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "custom-color-1",
          "label": "t:sections.all.colors.custom_color_1.label"
        },
        {
          "value": "custom-color-2",
          "label": "t:sections.all.colors.custom_color_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "accent-2",
      "label": "Card color scheme"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "accent-3",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "custom-color-1",
          "label": "t:sections.all.colors.custom_color_1.label"
        },
        {
          "value": "custom-color-2",
          "label": "t:sections.all.colors.custom_color_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        },
        {
          "value": "gradient-background-1",
          "label": "t:sections.all.colors.gradient_background_1.label"
        }
      ],
      "default": "accent-1",
      "label": "Section color scheme"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 24
    },
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Icon",
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "Icon SVG",
          "info": "You can get SVG codes from [Google Material Icons](https://material.io/tools/icons)"
        },
        {
          "type": "image_picker",
          "id": "custom_icon_image",
          "label": "Custom icon"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "default": "Icon",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Pair text with an icon to focus on your chosen product, collection, or blog post<p>",
          "label": "Body"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "range",
          "id": "custom_icon_size",
          "min": 20,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Custom icon size",
          "default": 40
        },
        {
          "type": "range",
          "id": "icon_heading_font_size",
          "min": 16,
          "max": 32,
          "step": 1,
          "unit": "px",
          "label": "Heading font size",
          "default": 24
        },
        {
          "type": "range",
          "id": "column_text_size",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Body font size",
          "default": 16
        },
        {
          "type": "header",
          "content": "Styling"
        },
        {
          "type": "color",
          "id": "custom_icon_color",
          "label": "Icon color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "icon_heading_color",
          "label": "Heading color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "icon_bolded_heading_color",
          "label": "Bolded heading color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "column_text_color",
          "label": "Body color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "column_text_highlighted_color",
          "label": "Bolded body color",
          "default": "#000000"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon guarantees",
      "blocks": [
        {
          "type": "column"
        },
        {
          "type": "column"
        },
        {
          "type": "column"
        },
        {
          "type": "column"
        }
      ]
    }
  ]
}
{% endschema %}
